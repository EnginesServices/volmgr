#!/bin/sh

#. /home/engines/functions/params_to_env.sh\r\n#params_to_env\r\n . /home/engines/functions/checks.sh\r\n#FIXME make engines.internal settable\r\n\r\nrequired_values=\"parent_engine service_name\"\r\ncheck_required_values\r\n\r\nexport parent_engine\r\nexport service_name\r\nexport container_type\r\n\r\nif test -z $voltype\r\n then\r\n  voltype=dir\r\nfi\r\n\r\n#FIX ME add more values to required\r\nrequired_values=\"parent_engine \"\r\n  check_required_values\r\n\r\nif  ! test -z $home_type \r\n  then\r\n   if test $home_type = all\r\n    then\r\n     sudo -n /home/engines/scripts/services/sudo/_remove_homes.sh\r\n   elif test $home_type = seperate\r\n      then\r\n      echo $homes |  sudo -n /home/engines/scripts/services/sudo/_remove_all_homes.sh\r\n   else\r\n     echo \"Unknown type\"  \r\n     exit 127\r\n   fi  \r\nelif test -z $is_secret\r\n then\r\n   sudo -n /home/engines/scripts/services/sudo/_delete_volume.sh\r\n else \r\n   echo $volume_src | grep \"^/var/lib/engines/secrets/$container_type\" >/dev/null\r\n    if test $? -ne 0\r\n     then\r\n      echo \"invalid volume $volume_src\"\r\n      exit 1\r\n    fi\r\n   sudo -n /home/engines/scripts/services/sudo/_delete_secret.sh\r\nfi  \r\n \r\nif test $? -eq 0\r\n then \r\n\techo \"Success\"\r\n    exit 0\r\nfi\r\nexit 127\r\n"
